#!/bin/bash

native=eDP1
external=DP1-3

# native_res=1920x1080
native_res=1600x900

# Find all external monitors
# but assumes only one exists
external=`xrandr  | grep "connected" | grep -v "dis" | grep -v "$native" | sed -e "s/\([A-Z0-9]\+\) connected.*/\1/"`

if test -z $external
then
    # Make sure xrandr is started
    xrandr >> /dev/null
fi

case "$1" in

    "")
        xrandr --output $native --mode $native_res --output $external --off
        ;;

    "above")
        # xrandr --output $native --auto
        # xrandr --output $external --auto --above $native
        ;;

    "left")
        # xrandr --output $native --auto
        # xrandr --output $external --auto --left-of $native
        ;;

    "right")
        # xrandr --output $native --auto
        # xrandr --output $external --auto --right-of $native
        ;;

    "copy")
        # xrandr --output $native --auto
        # xrandr --output $external --auto --same-as $native
        ;;

    "off")
        # xrandr --output $native --auto
        # xrandr --output $external --off
        ;;

    "dock")
        # xrandr --output $external --auto --above $native
        # xrandr --output $native --off
        xrandr --output $external --auto --output $native --off
        fix_capslock
        mouse
        ;;

    *)
        echo "Found: $external"
        echo $"Usage: monitor {above|left|right|copy|dock|off}"
        exit 1

esac

# Restart I3 to get panels back
i3-msg restart

